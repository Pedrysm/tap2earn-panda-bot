<!DOCTYPE html>
<html>
<head>
  <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no">
  <title>Crypto Panda 2025</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      -webkit-tap-highlight-color: transparent;
    }
    
    body, html {
      height: 100%;
      overflow: hidden;
      background: #000;
      font-family: 'Arial', sans-serif;
      touch-action: manipulation;
    }

    /* Pantalla de carga mejorada */
    #splash {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: #000;
      display: flex;
      flex-direction: column;
      justify-content: flex-end;
      align-items: center;
      padding-bottom: 120px;
      z-index: 1000;
    }

    .background-image {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: url('https://ibb.co/fz6GD0YP') center/cover;
      opacity: 0.9;
    }

    .background-overlay {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: linear-gradient(to bottom, transparent 40%, #000 90%);
    }

    .loading-content {
      position: relative;
      z-index: 2;
      text-align: center;
      width: 100%;
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    .loading-text {
      font-size: 24px;
      color: #ffd700;
      text-shadow: 0 0 20px rgba(255, 215, 0, 0.8);
      margin-bottom: 30px;
      font-weight: bold;
      letter-spacing: 3px;
      animation: textGlow 2s ease-in-out infinite alternate;
    }

    @keyframes textGlow {
      from { text-shadow: 0 0 10px rgba(255, 215, 0, 0.8); }
      to { text-shadow: 0 0 20px rgba(255, 215, 0, 1), 0 0 30px rgba(255, 215, 0, 0.6); }
    }

    .progress-container {
      width: 320px;
      margin-bottom: 25px;
      opacity: 1;
      transition: opacity 0.5s ease;
    }

    .progress-label {
      font-size: 18px;
      color: #ffd700;
      margin-bottom: 10px;
      text-shadow: 0 0 10px rgba(255, 215, 0, 0.6);
      font-weight: bold;
    }

    .progress-bar {
      width: 100%;
      height: 12px;
      background: rgba(255, 255, 255, 0.1);
      border-radius: 10px;
      overflow: hidden;
      box-shadow: 0 0 10px rgba(255, 215, 0, 0.3);
    }

    .progress-fill {
      height: 100%;
      width: 0%;
      background: linear-gradient(90deg, #ffd700, #ffaa00, #ffd700);
      border-radius: 10px;
      animation: loadProgress 5s ease-in-out forwards;
      position: relative;
      overflow: hidden;
    }

    .progress-fill::after {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.4), transparent);
      animation: shimmer 2s infinite;
    }

    @keyframes loadProgress {
      0% { width: 0%; }
      100% { width: 100%; }
    }

    @keyframes shimmer {
      0% { transform: translateX(-100%); }
      100% { transform: translateX(200%); }
    }

    #startBtn {
      padding: 20px 60px;
      background: linear-gradient(135deg, #ffd700, #ffaa00);
      color: #000;
      font-size: 28px;
      font-weight: bold;
      border: none;
      border-radius: 50px;
      box-shadow: 
        0 0 30px rgba(255, 215, 0, 0.6),
        0 10px 20px rgba(0, 0, 0, 0.3);
      cursor: pointer;
      position: relative;
      z-index: 2;
      opacity: 0;
      transform: translateY(20px);
      transition: all 0.5s ease;
      animation: btnPulse 2s infinite;
    }

    #startBtn.visible {
      opacity: 1;
      transform: translateY(0);
    }

    @keyframes btnPulse {
      0%, 100% { 
        transform: scale(1);
        box-shadow: 
          0 0 30px rgba(255, 215, 0, 0.6),
          0 10px 20px rgba(0, 0, 0, 0.3);
      }
      50% { 
        transform: scale(1.05);
        box-shadow: 
          0 0 40px rgba(255, 215, 0, 0.8),
          0 15px 30px rgba(0, 0, 0, 0.4);
      }
    }

    #startBtn:hover {
      transform: scale(1.05);
    }

    #startBtn:active {
      transform: scale(0.95);
    }

    /* Juego principal */
    #game {
      display: none;
      height: 100vh;
      flex-direction: column;
      background: radial-gradient(circle at center, #2a0044, #000);
      color: white;
    }

    .header {
      padding: 15px;
      background: rgba(0, 0, 0, 0.8);
      border-bottom: 3px solid #ffd700;
      text-align: center;
    }

    #coins {
      font-size: 32px;
      color: #ffd700;
      text-shadow: 0 0 10px gold;
      margin-bottom: 5px;
    }

    #energy {
      font-size: 18px;
      color: #00ff88;
    }

    #tapArea {
      flex: 1;
      display: flex;
      justify-content: center;
      align-items: center;
      position: relative;
      cursor: pointer;
    }

    #panda {
      width: 280px;
      height: 280px;
      background: linear-gradient(135deg, #fff, #eee);
      border-radius: 50%;
      display: flex;
      justify-content: center;
      align-items: center;
      box-shadow: 
        0 0 50px rgba(255, 215, 0, 0.5),
        inset 0 0 50px rgba(0, 0, 0, 0.1);
      transition: transform 0.1s;
      position: relative;
      overflow: hidden;
    }

    /* Ojos del panda */
    #panda::before,
    #panda::after {
      content: '';
      position: absolute;
      width: 50px;
      height: 50px;
      background: #000;
      border-radius: 50%;
      top: 80px;
    }

    #panda::before {
      left: 70px;
    }

    #panda::after {
      right: 70px;
    }

    /* Nariz */
    #panda .nose {
      position: absolute;
      width: 30px;
      height: 20px;
      background: #000;
      border-radius: 50%;
      top: 140px;
    }

    .floating-text {
      position: absolute;
      color: #ffd700;
      font-size: 40px;
      font-weight: bold;
      text-shadow: 0 0 10px rgba(255, 215, 0, 0.8);
      pointer-events: none;
      z-index: 100;
      animation: floatUp 1s ease-out forwards;
    }

    @keyframes floatUp {
      0% {
        transform: translateY(0) scale(1);
        opacity: 1;
      }
      100% {
        transform: translateY(-100px) scale(1.5);
        opacity: 0;
      }
    }

    .combo {
      position: absolute;
      top: 20%;
      left: 50%;
      transform: translateX(-50%);
      font-size: 48px;
      color: #ff4444;
      text-shadow: 0 0 20px red;
      animation: comboPulse 0.5s infinite;
      display: none;
    }

    @keyframes comboPulse {
      0%, 100% { transform: translateX(-50%) scale(1); }
      50% { transform: translateX(-50%) scale(1.2); }
    }

    .nav {
      position: fixed;
      bottom: 0;
      width: 100%;
      background: rgba(0, 0, 0, 0.9);
      padding: 15px;
      display: flex;
      justify-content: space-around;
    }

    .nav-btn {
      background: #ffd700;
      color: #000;
      width: 60px;
      height: 60px;
      border-radius: 50%;
      display: flex;
      justify-content: center;
      align-items: center;
      font-size: 24px;
      cursor: pointer;
      box-shadow: 0 5px 15px rgba(255, 215, 0, 0.3);
      transition: transform 0.2s;
    }

    .nav-btn:active {
      transform: scale(0.9);
    }

    /* Efectos especiales */
    .flash-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: white;
      opacity: 0;
      pointer-events: none;
      z-index: 9999;
      animation: fadeFlash 0.3s ease-out;
    }

    @keyframes fadeFlash {
      from { opacity: 0.6; }
      to { opacity: 0; }
    }

    .fade-out {
      animation: fadeOut 0.5s ease forwards;
    }

    @keyframes fadeOut {
      to {
        opacity: 0;
        transform: translateY(-10px);
      }
    }
  </style>
</head>
<body>
  <!-- Pantalla de carga con imagen -->
  <div id="splash">
    <div class="background-image"></div>
    <div class="background-overlay"></div>
    
    <div class="loading-content">
      <div class="progress-container" id="progressContainer">
        <div class="progress-label">Loading</div>
        <div class="progress-bar">
          <div class="progress-fill" id="progressFill"></div>
        </div>
      </div>
      
      <button id="startBtn">START GAME</button>
    </div>
  </div>

  <!-- Juego principal -->
  <div id="game">
    <div class="header">
      <div id="coins">0 $PANDA</div>
      <div id="energy">6000 / 6000 ‚ö°</div>
    </div>
    
    <div id="tapArea">
      <div id="panda">
        <div class="nose"></div>
      </div>
      <div class="combo" id="comboDisplay">COMBO!</div>
    </div>

    <div class="nav">
      <div class="nav-btn">üêº</div>
      <div class="nav-btn">üöÄ</div>
      <div class="nav-btn">üéÅ</div>
      <div class="nav-btn">üë•</div>
      <div class="nav-btn" onclick="showMessage('Skins coming soon!')">üé®</div>
    </div>
  </div>

  <script>
    // ===== CONFIGURACI√ìN SIMPLE =====
    let gameState = {
      coins: 0,
      energy: 6000,
      maxEnergy: 6000,
      level: 1,
      tapPower: 1,
      combo: 0,
      lastTap: 0
    };

    // ===== INICIALIZACI√ìN =====
    document.addEventListener('DOMContentLoaded', function() {
      console.log('üöÄ Iniciando Crypto Panda...');
      
      // Iniciar la secuencia de carga
      startLoadingSequence();
      
      // Configurar botones
      document.getElementById('startBtn').addEventListener('click', startGame);
      document.getElementById('tapArea').addEventListener('click', handleTap);
    });

    function startLoadingSequence() {
      // Despu√©s de 5 segundos (duraci√≥n de la animaci√≥n de la barra), mostrar el bot√≥n
      setTimeout(() => {
        const progressContainer = document.getElementById('progressContainer');
        const startBtn = document.getElementById('startBtn');
        
        // A√±adir efecto fade out a la barra de progreso
        progressContainer.classList.add('fade-out');
        
        // Despu√©s del fade out, mostrar el bot√≥n
        setTimeout(() => {
          progressContainer.style.display = 'none';
          startBtn.classList.add('visible');
        }, 500);
        
      }, 5000); // 5 segundos para la barra de carga
    }

    function startGame() {
      console.log('üéÆ Iniciando juego...');
      
      // Efecto de transici√≥n
      const splash = document.getElementById('splash');
      splash.style.opacity = '1';
      splash.style.transition = 'opacity 0.8s ease';
      
      setTimeout(() => {
        splash.style.opacity = '0';
        
        setTimeout(() => {
          splash.style.display = 'none';
          document.getElementById('game').style.display = 'flex';
          
          // Efecto de entrada del juego
          flashScreen();
          showFloatingText('WELCOME!', window.innerWidth / 2, window.innerHeight / 2);
          
          // Iniciar sistemas del juego
          startEnergyRegen();
          updateDisplay();
        }, 800);
      }, 100);
    }

    function handleTap(event) {
      if (gameState.energy <= 0) {
        showFloatingText('NO ENERGY!', event.clientX, event.clientY);
        return;
      }

      // Consumir energ√≠a
      gameState.energy -= 1;
      
      // Calcular combo
      const now = Date.now();
      if (now - gameState.lastTap < 500) {
        gameState.combo++;
      } else {
        gameState.combo = 1;
      }
      gameState.lastTap = now;

      // Calcular ganancia
      let coinsEarned = gameState.tapPower;
      if (gameState.combo >= 5) {
        coinsEarned *= 2;
        showCombo();
      }
      if (gameState.combo >= 10) {
        coinsEarned *= 3;
        createConfetti();
        flashScreen();
      }

      gameState.coins += coinsEarned;

      // Efectos visuales
      showFloatingText('+' + coinsEarned, event.clientX, event.clientY);
      animatePanda();
      updateDisplay();

      console.log(`üí∞ +${coinsEarned} coins | Combo: ${gameState.combo}x | Energy: ${gameState.energy}`);
    }

    function showFloatingText(text, x, y) {
      const floatingText = document.createElement('div');
      floatingText.className = 'floating-text';
      floatingText.textContent = text;
      floatingText.style.left = (x - 50) + 'px';
      floatingText.style.top = (y - 50) + 'px';
      
      // Color diferente para mensajes de error
      if (text.includes('NO ENERGY')) {
        floatingText.style.color = '#ff4444';
        floatingText.style.textShadow = '0 0 10px rgba(255, 68, 68, 0.8)';
      }
      
      document.body.appendChild(floatingText);
      
      setTimeout(() => {
        if (floatingText.parentNode) {
          document.body.removeChild(floatingText);
        }
      }, 1000);
    }

    function animatePanda() {
      const panda = document.getElementById('panda');
      panda.style.transform = 'scale(0.9)';
      setTimeout(() => {
        panda.style.transform = 'scale(1)';
      }, 100);
    }

    function showCombo() {
      const comboDisplay = document.getElementById('comboDisplay');
      comboDisplay.textContent = `COMBO x${gameState.combo}!`;
      comboDisplay.style.display = 'block';
      
      setTimeout(() => {
        comboDisplay.style.display = 'none';
      }, 1000);
    }

    function createConfetti() {
      // Confetti simple con emojis
      for (let i = 0; i < 15; i++) {
        setTimeout(() => {
          const emojis = ['üéâ', 'üí∞', '‚≠ê', 'üî•', 'üíé'];
          const randomEmoji = emojis[Math.floor(Math.random() * emojis.length)];
          showFloatingText(randomEmoji, 
            Math.random() * window.innerWidth, 
            Math.random() * window.innerHeight
          );
        }, i * 100);
      }
    }

    function flashScreen() {
      const flash = document.createElement('div');
      flash.className = 'flash-overlay';
      document.body.appendChild(flash);
      
      setTimeout(() => {
        if (flash.parentNode) {
          document.body.removeChild(flash);
        }
      }, 300);
    }

    function startEnergyRegen() {
      setInterval(() => {
        if (gameState.energy < gameState.maxEnergy) {
          gameState.energy += 1;
          updateDisplay();
        }
      }, 1000);
    }

    function updateDisplay() {
      document.getElementById('coins').textContent = 
        gameState.coins.toLocaleString() + ' $PANDA';
      document.getElementById('energy').textContent = 
        gameState.energy + ' / ' + gameState.maxEnergy + ' ‚ö°';
    }

    function showMessage(message) {
      showFloatingText(message, window.innerWidth / 2, window.innerHeight / 2);
    }

    // Exportar funciones globales
    window.showMessage = showMessage;

    // Integraci√≥n con Telegram si est√° disponible
    if (window.Telegram && window.Telegram.WebApp) {
      window.Telegram.WebApp.ready();
      console.log('‚úÖ Telegram WebApp integrado');
      
      // Expandir la WebApp para ocupar toda la pantalla
      window.Telegram.WebApp.expand();
    }

    console.log('üéØ Juego cargado y listo!');
  </script>
</body>
</html>
