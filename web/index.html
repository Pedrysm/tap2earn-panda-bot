<!DOCTYPE html>
<html>
<head>
  <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no">
  <title>Crypto Panda 2025</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      -webkit-tap-highlight-color: transparent;
    }
    
    body, html {
      height: 100%;
      overflow: hidden;
      background: #000;
      font-family: 'Arial', sans-serif;
      touch-action: manipulation;
    }

    /* Pantalla de carga */
    #splash {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: linear-gradient(135deg, #1a0033, #000);
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      z-index: 1000;
    }

    #loading {
      font-size: 48px;
      color: #ffd700;
      text-shadow: 0 0 20px gold;
      margin-bottom: 30px;
      text-align: center;
    }

    .progress-bar {
      width: 300px;
      height: 20px;
      background: #333;
      border-radius: 10px;
      overflow: hidden;
      margin-bottom: 30px;
    }

    .progress-fill {
      height: 100%;
      width: 0%;
      background: linear-gradient(90deg, #ffd700, #ffaa00);
      transition: width 0.3s ease;
    }

    #startBtn {
      padding: 20px 40px;
      background: #ffd700;
      color: #000;
      font-size: 24px;
      font-weight: bold;
      border: none;
      border-radius: 25px;
      cursor: pointer;
      box-shadow: 0 10px 25px rgba(255, 215, 0, 0.5);
      transition: transform 0.2s;
    }

    #startBtn:active {
      transform: scale(0.95);
    }

    /* Juego principal */
    #game {
      display: none;
      height: 100vh;
      flex-direction: column;
      background: radial-gradient(circle at center, #2a0044, #000);
      color: white;
    }

    .header {
      padding: 15px;
      background: rgba(0, 0, 0, 0.8);
      border-bottom: 3px solid #ffd700;
      text-align: center;
    }

    #coins {
      font-size: 32px;
      color: #ffd700;
      text-shadow: 0 0 10px gold;
      margin-bottom: 5px;
    }

    #energy {
      font-size: 18px;
      color: #00ff88;
    }

    #tapArea {
      flex: 1;
      display: flex;
      justify-content: center;
      align-items: center;
      position: relative;
      cursor: pointer;
    }

    #panda {
      width: 280px;
      height: 280px;
      background: linear-gradient(135deg, #fff, #eee);
      border-radius: 50%;
      display: flex;
      justify-content: center;
      align-items: center;
      box-shadow: 
        0 0 50px rgba(255, 215, 0, 0.5),
        inset 0 0 50px rgba(0, 0, 0, 0.1);
      transition: transform 0.1s;
      position: relative;
      overflow: hidden;
    }

    /* Ojos del panda */
    #panda::before,
    #panda::after {
      content: '';
      position: absolute;
      width: 50px;
      height: 50px;
      background: #000;
      border-radius: 50%;
      top: 80px;
    }

    #panda::before {
      left: 70px;
    }

    #panda::after {
      right: 70px;
    }

    /* Nariz */
    #panda .nose {
      position: absolute;
      width: 30px;
      height: 20px;
      background: #000;
      border-radius: 50%;
      top: 140px;
    }

    .floating-text {
      position: absolute;
      color: #ffd700;
      font-size: 40px;
      font-weight: bold;
      text-shadow: 0 0 10px rgba(255, 215, 0, 0.8);
      pointer-events: none;
      z-index: 100;
      animation: floatUp 1s ease-out forwards;
    }

    @keyframes floatUp {
      0% {
        transform: translateY(0) scale(1);
        opacity: 1;
      }
      100% {
        transform: translateY(-100px) scale(1.5);
        opacity: 0;
      }
    }

    .combo {
      position: absolute;
      top: 20%;
      left: 50%;
      transform: translateX(-50%);
      font-size: 48px;
      color: #ff4444;
      text-shadow: 0 0 20px red;
      animation: pulse 0.5s infinite;
      display: none;
    }

    @keyframes pulse {
      0%, 100% { transform: translateX(-50%) scale(1); }
      50% { transform: translateX(-50%) scale(1.2); }
    }

    .nav {
      position: fixed;
      bottom: 0;
      width: 100%;
      background: rgba(0, 0, 0, 0.9);
      padding: 15px;
      display: flex;
      justify-content: space-around;
    }

    .nav-btn {
      background: #ffd700;
      color: #000;
      width: 60px;
      height: 60px;
      border-radius: 50%;
      display: flex;
      justify-content: center;
      align-items: center;
      font-size: 24px;
      cursor: pointer;
      box-shadow: 0 5px 15px rgba(255, 215, 0, 0.3);
      transition: transform 0.2s;
    }

    .nav-btn:active {
      transform: scale(0.9);
    }

    /* Debug info */
    #debug {
      position: fixed;
      top: 10px;
      left: 10px;
      background: rgba(0, 0, 0, 0.8);
      color: #00ff88;
      padding: 10px;
      border-radius: 5px;
      font-size: 12px;
      z-index: 1000;
      display: none;
    }
  </style>
</head>
<body>
  <!-- Debug info -->
  <div id="debug"></div>

  <!-- Pantalla de carga -->
  <div id="splash">
    <div id="loading">CRYPTO PANDA</div>
    <div class="progress-bar">
      <div class="progress-fill" id="progressFill"></div>
    </div>
    <button id="startBtn" style="display: none;">START GAME</button>
  </div>

  <!-- Juego principal -->
  <div id="game">
    <div class="header">
      <div id="coins">0 $PANDA</div>
      <div id="energy">6000 ‚ö°</div>
    </div>
    
    <div id="tapArea">
      <div id="panda">
        <div class="nose"></div>
      </div>
      <div class="combo" id="comboDisplay">COMBO!</div>
    </div>

    <div class="nav">
      <div class="nav-btn">üêº</div>
      <div class="nav-btn">üöÄ</div>
      <div class="nav-btn">üéÅ</div>
      <div class="nav-btn">üë•</div>
      <div class="nav-btn" onclick="showMessage('Skins coming soon!')">üé®</div>
    </div>
  </div>

  <script>
    // ===== CONFIGURACI√ìN SIMPLE =====
    let gameState = {
      coins: 0,
      energy: 6000,
      maxEnergy: 6000,
      level: 1,
      tapPower: 1,
      combo: 0,
      lastTap: 0
    };

    // ===== INICIALIZACI√ìN =====
    document.addEventListener('DOMContentLoaded', function() {
      console.log('üöÄ Iniciando juego...');
      
      // Simular progreso de carga
      simulateLoading();
      
      // Configurar botones
      document.getElementById('startBtn').addEventListener('click', startGame);
      document.getElementById('tapArea').addEventListener('click', handleTap);
      
      // Mostrar info de debug
      showDebugInfo();
    });

    function simulateLoading() {
      let progress = 0;
      const progressFill = document.getElementById('progressFill');
      const interval = setInterval(() => {
        progress += Math.random() * 15;
        if (progress >= 100) {
          progress = 100;
          clearInterval(interval);
          document.getElementById('startBtn').style.display = 'block';
          document.getElementById('loading').textContent = 'READY TO PLAY!';
        }
        progressFill.style.width = progress + '%';
      }, 200);
    }

    function startGame() {
      console.log('üéÆ Iniciando juego...');
      document.getElementById('splash').style.display = 'none';
      document.getElementById('game').style.display = 'flex';
      
      // Iniciar sistemas del juego
      startEnergyRegen();
      updateDisplay();
      
      // Efecto de inicio
      showFloatingText('START!', window.innerWidth / 2, window.innerHeight / 2);
    }

    function handleTap(event) {
      if (gameState.energy <= 0) {
        showFloatingText('NO ENERGY!', event.clientX, event.clientY);
        return;
      }

      // Consumir energ√≠a
      gameState.energy -= 1;
      
      // Calcular combo
      const now = Date.now();
      if (now - gameState.lastTap < 500) {
        gameState.combo++;
      } else {
        gameState.combo = 1;
      }
      gameState.lastTap = now;

      // Calcular ganancia
      let coinsEarned = gameState.tapPower;
      if (gameState.combo >= 5) {
        coinsEarned *= 2;
        showCombo();
      }
      if (gameState.combo >= 10) {
        coinsEarned *= 3;
        createConfetti();
      }

      gameState.coins += coinsEarned;

      // Efectos visuales
      showFloatingText('+' + coinsEarned, event.clientX, event.clientY);
      animatePanda();
      updateDisplay();

      console.log(`üí∞ +${coinsEarned} coins | Combo: ${gameState.combo}x | Energy: ${gameState.energy}`);
    }

    function showFloatingText(text, x, y) {
      const floatingText = document.createElement('div');
      floatingText.className = 'floating-text';
      floatingText.textContent = text;
      floatingText.style.left = (x - 50) + 'px';
      floatingText.style.top = (y - 50) + 'px';
      
      document.body.appendChild(floatingText);
      
      setTimeout(() => {
        document.body.removeChild(floatingText);
      }, 1000);
    }

    function animatePanda() {
      const panda = document.getElementById('panda');
      panda.style.transform = 'scale(0.9)';
      setTimeout(() => {
        panda.style.transform = 'scale(1)';
      }, 100);
    }

    function showCombo() {
      const comboDisplay = document.getElementById('comboDisplay');
      comboDisplay.textContent = `COMBO x${gameState.combo}!`;
      comboDisplay.style.display = 'block';
      
      setTimeout(() => {
        comboDisplay.style.display = 'none';
      }, 1000);
    }

    function createConfetti() {
      // Confetti simple con emojis
      for (let i = 0; i < 10; i++) {
        setTimeout(() => {
          showFloatingText('üéâ', 
            Math.random() * window.innerWidth, 
            Math.random() * window.innerHeight
          );
        }, i * 100);
      }
    }

    function startEnergyRegen() {
      setInterval(() => {
        if (gameState.energy < gameState.maxEnergy) {
          gameState.energy += 1;
          updateDisplay();
        }
      }, 1000);
    }

    function updateDisplay() {
      document.getElementById('coins').textContent = 
        gameState.coins.toLocaleString() + ' $PANDA';
      document.getElementById('energy').textContent = 
        gameState.energy + ' / ' + gameState.maxEnergy + ' ‚ö°';
    }

    function showMessage(message) {
      showFloatingText(message, window.innerWidth / 2, window.innerHeight / 2);
    }

    function showDebugInfo() {
      const debug = document.getElementById('debug');
      debug.style.display = 'block';
      debug.innerHTML = `
        Loaded: ‚úÖ<br>
        Touch: ${'ontouchstart' in window ? '‚úÖ' : '‚ùå'}<br>
        Telegram: ${window.Telegram ? '‚úÖ' : '‚ùå'}<br>
        View: ${window.innerWidth}x${window.innerHeight}
      `;
      
      setTimeout(() => {
        debug.style.display = 'none';
      }, 5000);
    }

    // Exportar para Telegram si est√° disponible
    if (window.Telegram) {
      window.Telegram.WebApp.ready();
      console.log('‚úÖ Telegram WebApp integrado');
    }

    console.log('üéØ Juego cargado y listo!');
  </script>
</body>
</html>
