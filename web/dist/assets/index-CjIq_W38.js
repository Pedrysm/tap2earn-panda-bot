import{createClient as f}from"https://cdn.jsdelivr.net/npm/@supabase/supabase-js/+esm";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))l(t);new MutationObserver(t=>{for(const n of t)if(n.type==="childList")for(const c of n.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&l(c)}).observe(document,{childList:!0,subtree:!0});function u(t){const n={};return t.integrity&&(n.integrity=t.integrity),t.referrerPolicy&&(n.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?n.credentials="include":t.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function l(t){if(t.ep)return;t.ep=!0;const n=u(t);fetch(t.href,n)}})();const o=f("https://mixbbsgniudsgcucyfwe.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im1peGJic2duaXVkc2djdWN5ZndlIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjM3MzI5MjYsImV4cCI6MjA3OTMwODkyNn0.7nFucL4SgTmktM1UPFl_xffu1CYvpG_RO-O6tGcM5jk"),m=window.Telegram.WebApp;m.ready();var d;const s=((d=m.initDataUnsafe.user)==null?void 0:d.id)||987654321;let e=null;async function p(){let{data:i}=await o.from("profiles").select("*").eq("telegram_id",s).maybeSingle();i||(await o.from("profiles").insert({telegram_id:s}),i={coins:0,energy:6e3,max_energy:6e3,multitap:1}),e=i,document.getElementById("loading").classList.add("hidden"),document.getElementById("game").classList.remove("hidden"),a(),setInterval(g,1e3)}function a(){document.getElementById("coins").textContent=Number(e.coins||0).toLocaleString()+" $PANDA",document.getElementById("energy").textContent=`${e.energy||6e3} / ${e.max_energy||6e3} ⚡️`}document.getElementById("tap-area").onclick=async i=>{if((e.energy||0)<=0)return;e.energy-=1,e.coins=Number(e.coins||0)+(e.multitap||1),await o.from("profiles").update({coins:e.coins,energy:e.energy}).eq("telegram_id",s),a();const r=document.createElement("div");r.className="tap-effect text-6xl",r.textContent="+"+(e.multitap||1),r.style.left=i.clientX-50+"px",r.style.top=i.clientY-100+"px",document.body.appendChild(r),setTimeout(()=>r.remove(),1e3),document.getElementById("panda").style.transform="scale(0.9)",setTimeout(()=>document.getElementById("panda").style.transform="",150)};function g(){(e.energy||0)<(e.max_energy||6e3)&&(e.energy+=1,o.from("profiles").update({energy:e.energy}).eq("telegram_id",s),a())}p();
